<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <assignments>
        <name>Aggregate_sOPE_Ad_Hoc_1</name>
        <label>Aggregate sOPE Ad Hoc 1</label>
        <locationX>1900</locationX>
        <locationY>277</locationY>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_fac_ad_hoc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.total_comm_doll_fac_OTE__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_fac_hours_ad_hoc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.fac_hours_ad_hoc__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_perc_comm__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.perc_comm__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>sORR_Role_2</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Aggregate_sOPE_totals</name>
        <label>Aggregate sOPE totals</label>
        <locationX>1479</locationX>
        <locationY>470</locationY>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_rev_rec__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_rev_rec__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_perc_comm__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.perc_comm__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_fac_days__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.fac_days__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>sOPE_type</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>CatchEnsiPerc</name>
        <label>CatchEnsiPerc</label>
        <locationX>1898</locationX>
        <locationY>516</locationY>
        <assignmentItems>
            <assignToReference>vDollCommEnsiPerc</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.perc_comm__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Touch_sORR_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Collect_sOPE</name>
        <label>Collect sOPE</label>
        <locationX>475</locationX>
        <locationY>477</locationY>
        <assignmentItems>
            <assignToReference>scOpportunityProductExtensionsUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityProductExtension</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_scOPE</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Collect_sORR_update</name>
        <label>Collect sORR update</label>
        <locationX>1637</locationX>
        <locationY>514</locationY>
        <assignmentItems>
            <assignToReference>scOpportunityRoleRecordsUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOrrTouch</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_scORR_0_1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_sOPE_totals_count</name>
        <label>Reset sOPE totals, +count</label>
        <locationX>682</locationX>
        <locationY>365</locationY>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_fac_perc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_mark_perc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_ENSI_perc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_rev_rec__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_perc_comm__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_fac_days__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpportunityProductsSyncCount</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Find_scORR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_sOPE_totals_loop_1</name>
        <label>Reset sOPE totals loop 1</label>
        <locationX>473</locationX>
        <locationY>269</locationY>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_fac_ad_hoc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_fac_hours_ad_hoc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_ensi_ad_hoc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpportunityProductsSyncCount</assignToReference>
            <operator>Add</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_perc_comm__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Find_scORR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_sOpp_syncing</name>
        <label>Reset sOpp syncing</label>
        <locationX>333</locationX>
        <locationY>707</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate.Opportunity_Role_Records_syncing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Opportunity_Products_roll_up_sync__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Products_sync_status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>All done</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Split_fees_and_invoices_sync_status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Syncing</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Opportunity_Products_resync__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_sOpp</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_sOppUpdate</name>
        <label>Reset sOppUpdate</label>
        <locationX>35</locationX>
        <locationY>891</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sOppEmpty</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Set_sOpp_Rollup_sync</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_sync_status</name>
        <label>Reset sync status</label>
        <locationX>806</locationX>
        <locationY>182</locationY>
        <assignmentItems>
            <assignToReference>sOpportunity.Products_sync_status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>All done</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunity.Split_fees_and_invoices_sync_status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>All done</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunity.Sync_in_progress__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_sOpp_sync_status</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_sOPE_Ad_Hoc_ENSI</name>
        <label>Set sOPE Ad Hoc ENSI</label>
        <locationX>1554</locationX>
        <locationY>856</locationY>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_ensi_ad_hoc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>fTotalDollCommEnsiAdHoc</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Collect_sOPE</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_sOpp_Rollup_sync</name>
        <label>Set sOpp Roll-up sync</label>
        <locationX>35</locationX>
        <locationY>985</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate.Opportunity_Products_roll_up_sync__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_sOpp_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_sOpp_sync_again</name>
        <label>Set sOpp sync again</label>
        <locationX>769</locationX>
        <locationY>10</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate.Opportunity_Products_sync__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Opportunity_Products_requires_resync__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Products_sync_status__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>All done</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Opportunity_Role_Records_syncing__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_sOpp_1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>sOpo_Ad_Hoc_aggregate_Service</name>
        <label>sOpp Ad Hoc aggregate Service</label>
        <locationX>1014</locationX>
        <locationY>566</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_fac_fee_split_serv_ad_hoc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.total_comm_doll_fac_OTE__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_mark_fee_split_serv_ad_hoc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.total_comm_doll_mark_OTE__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_scORR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>sOpp_aggregate_Material</name>
        <label>sOpp aggregate Material</label>
        <locationX>1269</locationX>
        <locationY>558</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_mark_fee_split_mat__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_mark_perc__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_mark_perc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_mark_perc__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_ENSI_perc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_ENSI_perc__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_scORR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>sOpp_aggregate_Service</name>
        <label>sOpp aggregate Service</label>
        <locationX>1142</locationX>
        <locationY>561</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_fac_fee_split_serv__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_fac_perc__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_mark_fee_split_serv__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_mark_perc__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_mark_perc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_mark_perc__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_ENSI_perc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_ENSI_perc__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_fac_perc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_fac_perc__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_scORR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>sOpp_FF_aggregate_Service</name>
        <label>sOpp FF aggregate Service</label>
        <locationX>1399</locationX>
        <locationY>559</locationY>
        <assignmentItems>
            <assignToReference>sOpportunityProductExtension.Total_doll_comm_fac_perc__c</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.doll_comm_fac_perc__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_scORR</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>sOppUpdate_set_for_aggregate</name>
        <label>sOppUpdate set for aggregate</label>
        <locationX>258</locationX>
        <locationY>177</locationY>
        <assignmentItems>
            <assignToReference>sOppUpdate.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_fac_fee_split_serv__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_mark_fee_split_mat__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_mark_fee_split_serv__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_fac_fee_split_serv_ad_hoc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Total_mark_fee_split_serv_ad_hoc__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>vOpportunityProductsSyncCount</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOppUpdate.Description</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sOpportunity.Description</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>If_vTest2ndLoop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>TEST_Set_2nd_Loop</name>
        <label>TEST Set 2nd Loop</label>
        <locationX>102</locationX>
        <locationY>366</locationY>
        <assignmentItems>
            <assignToReference>sOpportunity.Opportunity_Products_roll_up_sync__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_scOPE</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Touch_sORR_0</name>
        <label>Touch sORR</label>
        <locationX>1766</locationX>
        <locationY>516</locationY>
        <assignmentItems>
            <assignToReference>sOrrTouch.Touch__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.CurrentDateTime</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sOrrTouch.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sOpportunityRoleRecord.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Collect_sORR_update</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Check_sOpp_Requires_Resync</name>
        <label>Check sOpp Requires Resync</label>
        <locationX>559</locationX>
        <locationY>7</locationY>
        <defaultConnector>
            <targetReference>Find_scOPE</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No, don&apos;t resync</defaultConnectorLabel>
        <rules>
            <name>Yes_resync</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Products_requires_resync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_sOpp_sync_again</targetReference>
            </connector>
            <label>Yes, resync</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_vTest2ndLoop</name>
        <label>If vTest2ndLoop</label>
        <locationX>106</locationX>
        <locationY>176</locationY>
        <defaultConnector>
            <targetReference>Loop_scOPE</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>False</defaultConnectorLabel>
        <rules>
            <name>If_vTest2ndLoop_True</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vTest2ndLoop</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>TEST_Set_2nd_Loop</targetReference>
            </connector>
            <label>True</label>
        </rules>
    </decisions>
    <decisions>
        <name>IfAdHoc</name>
        <label>IfAdHoc</label>
        <locationX>1273</locationX>
        <locationY>655</locationY>
        <defaultConnector>
            <targetReference>sOpp_aggregate_Service</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not Ad Hoc</defaultConnectorLabel>
        <rules>
            <name>Yes_Ad_Hoc</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunityProductExtension.OP_is_Ad_Hoc__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>sOpo_Ad_Hoc_aggregate_Service</targetReference>
            </connector>
            <label>Yes, Ad Hoc</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsOppConsulting</name>
        <label>IsOppConsulting</label>
        <locationX>39</locationX>
        <locationY>493</locationY>
        <defaultConnector>
            <targetReference>Reset_sOpp_syncing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>[Default Outcome]</defaultConnectorLabel>
        <rules>
            <name>Yes_consulting_loop</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Types__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consulting / retainer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Products_roll_up_sync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>scORR_to_update</targetReference>
            </connector>
            <label>Yes, consulting, do loop</label>
        </rules>
        <rules>
            <name>Yes_but_loop_complete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Types__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consulting / retainer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Products_roll_up_sync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Reset_sOpp_syncing</targetReference>
            </connector>
            <label>Yes, but loop complete</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsOppConsulting_1</name>
        <label>IsOppConsulting</label>
        <locationX>1269</locationX>
        <locationY>363</locationY>
        <defaultConnector>
            <targetReference>Loop_scORR</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not consulting</defaultConnectorLabel>
        <rules>
            <name>Yes_consulting_loop_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Types__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consulting / retainer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Products_roll_up_sync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_scORR_0_1</targetReference>
            </connector>
            <label>Yes, consulting, loop 1</label>
        </rules>
        <rules>
            <name>Yes_but_loop_2</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Types__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consulting / retainer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Products_roll_up_sync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_scORR</targetReference>
            </connector>
            <label>Yes, but loop 2</label>
        </rules>
    </decisions>
    <decisions>
        <name>IsOppConsulting_1_0</name>
        <label>IsOppConsulting</label>
        <locationX>473</locationX>
        <locationY>367</locationY>
        <defaultConnector>
            <targetReference>Reset_sOPE_totals_count</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Not consulting</defaultConnectorLabel>
        <rules>
            <name>Yes_consulting_loop_1_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Types__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consulting / retainer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Products_roll_up_sync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Reset_sOPE_totals_loop_1</targetReference>
            </connector>
            <label>Yes, consulting, loop 1</label>
        </rules>
        <rules>
            <name>Yes_but_loop_2_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Types__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Consulting / retainer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOpportunity.Opportunity_Products_roll_up_sync__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Reset_sOPE_totals_count</targetReference>
            </connector>
            <label>Yes, but loop 2</label>
        </rules>
    </decisions>
    <decisions>
        <name>scOPE_NULL_0</name>
        <label>scOPE NULL</label>
        <locationX>560</locationX>
        <locationY>182</locationY>
        <defaultConnector>
            <targetReference>Reset_sync_status</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>scOPE NULL</defaultConnectorLabel>
        <rules>
            <name>scOPE_NOT_NULL_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>scOpportunityProductExtensions</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>sOppUpdate_set_for_aggregate</targetReference>
            </connector>
            <label>scOPE NOT NULL</label>
        </rules>
    </decisions>
    <decisions>
        <name>scORR_NULL</name>
        <label>scORR NULL</label>
        <locationX>1045</locationX>
        <locationY>362</locationY>
        <defaultConnector>
            <targetReference>Collect_sOPE</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>scORR NULL</defaultConnectorLabel>
        <rules>
            <name>scORR_NOT_NULL</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>scOpportunityRoleRecords</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IsOppConsulting_1</targetReference>
            </connector>
            <label>scORR NOT NULL</label>
        </rules>
    </decisions>
    <decisions>
        <name>scORR_to_update</name>
        <label>scORR to update</label>
        <locationX>35</locationX>
        <locationY>601</locationY>
        <defaultConnector>
            <targetReference>PauseBeforeLoop</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No sORR to update</defaultConnectorLabel>
        <rules>
            <name>Yes_sORR_to_update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>scOpportunityRoleRecordsUpdate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_sORR</targetReference>
            </connector>
            <label>Yes, sORR to update</label>
        </rules>
    </decisions>
    <decisions>
        <name>sOPE_type</name>
        <label>sOPE type</label>
        <locationX>1480</locationX>
        <locationY>655</locationY>
        <defaultConnector>
            <targetReference>sOpp_FF_aggregate_Service</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Other</defaultConnectorLabel>
        <rules>
            <name>sOPE_type_Service</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunityRoleRecord.OP_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Service</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>IfAdHoc</targetReference>
            </connector>
            <label>sOPE type Service</label>
        </rules>
        <rules>
            <name>sOPE_type_Material</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunityRoleRecord.OP_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Material</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>sOpp_aggregate_Material</targetReference>
            </connector>
            <label>sOPE type Material</label>
        </rules>
    </decisions>
    <decisions>
        <name>sORR_Role_2</name>
        <label>sORR Role</label>
        <locationX>1900</locationX>
        <locationY>368</locationY>
        <defaultConnector>
            <targetReference>Loop_scORR_0_1</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Fac</defaultConnectorLabel>
        <rules>
            <name>Role_ENSI</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunityRoleRecord.Role__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>ENSI</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CatchEnsiPerc</targetReference>
            </connector>
            <label>Role ENSI</label>
        </rules>
        <rules>
            <name>Role_Sell_or_Spot</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>sOpportunityRoleRecord.Role__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Sell</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOpportunityRoleRecord.Role__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Spot</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Touch_sORR_0</targetReference>
            </connector>
            <label>Role Sell or Spot</label>
        </rules>
    </decisions>
    <formulas>
        <description>doll_rev_rec_ad_hoc_check</description>
        <name>fDollRecRecAdHocCheck</name>
        <dataType>Currency</dataType>
        <expression>{!sOpportunityProductExtension.Total_fac_hours_ad_hoc__c}/{!sOpportunity.Hours_in_a_day__c}*{!sOpportunityProductExtension.OP_Unit_Price__c}</expression>
        <scale>5</scale>
    </formulas>
    <formulas>
        <description>Total_doll_comm_ensi_ad_hoc__c</description>
        <name>fTotalDollCommEnsiAdHoc</name>
        <dataType>Currency</dataType>
        <expression>{!fDollRecRecAdHocCheck}*{!vDollCommEnsiPerc}/100</expression>
        <scale>5</scale>
    </formulas>
    <interviewLabel>Opportunity Product Extension Roll-up {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Opportunity Product Extension Roll-up</label>
    <loops>
        <name>Loop_scOPE</name>
        <label>scOPE</label>
        <locationX>254</locationX>
        <locationY>364</locationY>
        <assignNextValueToReference>sOpportunityProductExtension</assignNextValueToReference>
        <collectionReference>scOpportunityProductExtensions</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>IsOppConsulting_1_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_scOPE</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_scORR</name>
        <label>scORR</label>
        <locationX>1269</locationX>
        <locationY>467</locationY>
        <assignNextValueToReference>sOpportunityRoleRecord</assignNextValueToReference>
        <collectionReference>scOpportunityRoleRecords</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Aggregate_sOPE_totals</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Collect_sOPE</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_scORR_0_1</name>
        <label>scORR</label>
        <locationX>1547</locationX>
        <locationY>370</locationY>
        <assignNextValueToReference>sOpportunityRoleRecord</assignNextValueToReference>
        <collectionReference>scOpportunityRoleRecords</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Aggregate_sOPE_Ad_Hoc_1</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Set_sOPE_Ad_Hoc_ENSI</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Find_scOPE</name>
        <label>scOPE</label>
        <locationX>558</locationX>
        <locationY>98</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>scOPE_NULL_0</targetReference>
        </connector>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </filters>
        <object>Opportunity_Product_Extension__c</object>
        <outputReference>scOpportunityProductExtensions</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Total_doll_comm_fac_perc__c</queriedFields>
        <queriedFields>Total_doll_comm_fac_ad_hoc__c</queriedFields>
        <queriedFields>Total_doll_comm_mark_perc__c</queriedFields>
        <queriedFields>Total_doll_comm_ENSI_perc__c</queriedFields>
        <queriedFields>Total_doll_rev_rec__c</queriedFields>
        <queriedFields>Total_perc_comm__c</queriedFields>
        <queriedFields>Total_fac_days__c</queriedFields>
        <queriedFields>Total_fac_days_ad_hoc__c</queriedFields>
        <queriedFields>OP_is_Ad_Hoc__c</queriedFields>
        <queriedFields>Total_doll_comm_mark_ad_hoc__c</queriedFields>
        <queriedFields>doll_rev_rec_ad_hoc_check__c</queriedFields>
        <queriedFields>OP_Unit_Price__c</queriedFields>
        <queriedFields>Shared_ID__c</queriedFields>
        <queriedFields>OPE_code__c</queriedFields>
        <queriedFields>Remaining_fac_days_ad_hoc__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Find_scORR</name>
        <label>scORR</label>
        <locationX>851</locationX>
        <locationY>361</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>scORR_NULL</targetReference>
        </connector>
        <filters>
            <field>OPE__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>sOpportunityProductExtension.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </filters>
        <object>Opportunity_Role_Record__c</object>
        <outputReference>scOpportunityRoleRecords</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>doll_comm_fac_perc__c</queriedFields>
        <queriedFields>doll_comm_fac_ad_hoc__c</queriedFields>
        <queriedFields>doll_comm_mark_perc__c</queriedFields>
        <queriedFields>doll_comm_ENSI_perc__c</queriedFields>
        <queriedFields>doll_rev_rec__c</queriedFields>
        <queriedFields>perc_comm__c</queriedFields>
        <queriedFields>fac_days__c</queriedFields>
        <queriedFields>fac_hours_ad_hoc__c</queriedFields>
        <queriedFields>OPE__c</queriedFields>
        <queriedFields>OP_Type__c</queriedFields>
        <queriedFields>doll_comm_fac__c</queriedFields>
        <queriedFields>OP_Name__c</queriedFields>
        <queriedFields>doll_comm_ENSI_ad_hoc__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Role__c</queriedFields>
        <queriedFields>doll_comm_mark_ad_hoc__c</queriedFields>
        <queriedFields>total_comm_doll_fac_OTE__c</queriedFields>
        <queriedFields>total_comm_doll_mark_OTE__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Find_sOpp</name>
        <label>sOpp</label>
        <locationX>263</locationX>
        <locationY>4</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_sOpp_Requires_Resync</targetReference>
        </connector>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputReference>sOpportunity</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Opportunity_Products_sync_count__c</queriedFields>
        <queriedFields>Opportunity_Types__c</queriedFields>
        <queriedFields>Opportunity_Products_roll_up_sync__c</queriedFields>
        <queriedFields>Opportunity_Products_requires_resync__c</queriedFields>
        <queriedFields>Description</queriedFields>
        <queriedFields>Hours_in_a_day__c</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>Update_scOPE</name>
        <label>Update scOPE</label>
        <locationX>255</locationX>
        <locationY>490</locationY>
        <connector>
            <targetReference>IsOppConsulting</targetReference>
        </connector>
        <inputReference>scOpportunityProductExtensionsUpdate</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_sOpp</name>
        <label>Update sOpp</label>
        <locationX>335</locationX>
        <locationY>808</locationY>
        <connector>
            <targetReference>Pause_before_expenses_aggregatation</targetReference>
        </connector>
        <inputReference>sOppUpdate</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_sOpp_0</name>
        <label>Update sOpp</label>
        <locationX>34</locationX>
        <locationY>1090</locationY>
        <inputReference>sOppUpdate</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_sOpp_1</name>
        <label>Update sOpp</label>
        <locationX>926</locationX>
        <locationY>12</locationY>
        <inputReference>sOppUpdate</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_sOpp_sync_status</name>
        <label>Update sOpp sync status</label>
        <locationX>973</locationX>
        <locationY>184</locationY>
        <inputReference>sOpportunity</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_sORR</name>
        <label>Update sORR</label>
        <locationX>170</locationX>
        <locationY>704</locationY>
        <connector>
            <targetReference>PauseBeforeLoop</targetReference>
        </connector>
        <inputReference>scOpportunityRoleRecordsUpdate</inputReference>
    </recordUpdates>
    <startElementReference>Find_sOpp</startElementReference>
    <status>Active</status>
    <subflows>
        <name>Aggregate_fee_splits</name>
        <label>Aggregate fee splits</label>
        <locationX>333</locationX>
        <locationY>1002</locationY>
        <flowName>Expenses_aggregate_fee_splits</flowName>
        <inputAssignments>
            <name>vOpportunityId</name>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </inputAssignments>
        <outputAssignments>
            <assignToReference>vOpportunityId</assignToReference>
            <name>vOpportunityId</name>
        </outputAssignments>
    </subflows>
    <variables>
        <name>scOpportunityProductExtensions</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity_Product_Extension__c</objectType>
    </variables>
    <variables>
        <name>scOpportunityProductExtensionsEmpty</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity_Product_Extension__c</objectType>
    </variables>
    <variables>
        <name>scOpportunityProductExtensionsUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity_Product_Extension__c</objectType>
    </variables>
    <variables>
        <name>scOpportunityRoleRecords</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity_Role_Record__c</objectType>
    </variables>
    <variables>
        <name>scOpportunityRoleRecordsUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity_Role_Record__c</objectType>
    </variables>
    <variables>
        <name>sOppEmpty</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>sOpportunity</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>sOpportunityProductExtension</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity_Product_Extension__c</objectType>
    </variables>
    <variables>
        <name>sOpportunityRoleRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity_Role_Record__c</objectType>
    </variables>
    <variables>
        <name>sOppUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>sOrrTouch</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity_Role_Record__c</objectType>
    </variables>
    <variables>
        <name>vAdHocLoopEnsi</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>vAdHocLoopFac</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>vAdHocLoopRevRec</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>vDollCommEnsiPerc</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>5</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>vOpportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>vOpportunityProductsSyncCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>vTest2ndLoop</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>vWaitDeliveryStatus</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <waits>
        <name>Pause_before_expenses_aggregatation</name>
        <label>Pause before expenses aggregatation</label>
        <locationX>334</locationX>
        <locationY>905</locationY>
        <defaultConnectorLabel>[Default Path]</defaultConnectorLabel>
        <waitEvents>
            <name>WaitOneMinute_expenses</name>
            <conditionLogic>and</conditionLogic>
            <connector>
                <targetReference>Aggregate_fee_splits</targetReference>
            </connector>
            <eventType>DateRefAlarmEvent</eventType>
            <inputParameters>
                <name>EntityObjectId</name>
                <value>
                    <elementReference>vOpportunityId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeFieldColumnEnumOrId</name>
                <value>
                    <stringValue>Wait_base_time_1_minute__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeTableColumnEnumOrId</name>
                <value>
                    <stringValue>Opportunity</stringValue>
                </value>
            </inputParameters>
            <label>WaitOneMinute</label>
            <outputParameters>
                <assignToReference>vWaitDeliveryStatus</assignToReference>
                <name>Status</name>
            </outputParameters>
        </waitEvents>
    </waits>
    <waits>
        <name>PauseBeforeLoop</name>
        <label>PauseBeforeLoop</label>
        <locationX>32</locationX>
        <locationY>783</locationY>
        <defaultConnectorLabel>[Default Path]</defaultConnectorLabel>
        <waitEvents>
            <name>WaitOneMinute</name>
            <conditionLogic>and</conditionLogic>
            <connector>
                <targetReference>Reset_sOppUpdate</targetReference>
            </connector>
            <eventType>DateRefAlarmEvent</eventType>
            <inputParameters>
                <name>EntityObjectId</name>
                <value>
                    <elementReference>vOpportunityId</elementReference>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeFieldColumnEnumOrId</name>
                <value>
                    <stringValue>Wait_base_time_1_minute__c</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeTableColumnEnumOrId</name>
                <value>
                    <stringValue>Opportunity</stringValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffset</name>
                <value>
                    <numberValue>1.0</numberValue>
                </value>
            </inputParameters>
            <inputParameters>
                <name>TimeOffsetUnit</name>
                <value>
                    <stringValue>Hours</stringValue>
                </value>
            </inputParameters>
            <label>WaitOneMinute</label>
            <outputParameters>
                <assignToReference>vWaitDeliveryStatus</assignToReference>
                <name>Status</name>
            </outputParameters>
        </waitEvents>
    </waits>
</Flow>
