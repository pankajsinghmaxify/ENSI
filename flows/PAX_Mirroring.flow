<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>TestNoGood</name>
        <label>TestNoGood</label>
        <locationX>329</locationX>
        <locationY>867</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <stringValue>Aggh no good</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Aggh no good</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>mike@curioushuman.com.au</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>TestOcPaxSet</name>
        <label>TestOcPaxSet</label>
        <locationX>457</locationX>
        <locationY>870</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <stringValue>Hmmmm {!sOcPax.PAX__c}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>OC PAX already set to - {!sPax.Id}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>mike@curioushuman.com.au</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>TestUpdatOcPax</name>
        <label>TestUpdatOcPax</label>
        <locationX>337</locationX>
        <locationY>787</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <stringValue>Woot woot</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>Update OC PAX - {!sPax.Id}</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>mike@curioushuman.com.au</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <actionCalls>
        <name>WeUpdated</name>
        <label>WeUpdated</label>
        <locationX>465</locationX>
        <locationY>785</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <stringValue>Hooha</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <stringValue>We updated</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <stringValue>mike@curioushuman.com.au</stringValue>
            </value>
        </inputParameters>
    </actionCalls>
    <assignments>
        <name>AddCreatedPax</name>
        <label>AddCreatedPax</label>
        <locationX>965</locationX>
        <locationY>81</locationY>
        <assignmentItems>
            <assignToReference>scPax</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sPax</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ForeachCreatedPax</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>MatchFound</name>
        <label>MatchFound</label>
        <locationX>13</locationX>
        <locationY>492</locationY>
        <assignmentItems>
            <assignToReference>vMatchFound</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ForeachPax</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>MatchFound_0</name>
        <label>MatchFound</label>
        <locationX>793</locationX>
        <locationY>498</locationY>
        <assignmentItems>
            <assignToReference>vMatchFound</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ForeachOcPaxReverse</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>OcPaxToUpdate</name>
        <label>OcPaxToUpdate</label>
        <locationX>624</locationX>
        <locationY>348</locationY>
        <assignmentItems>
            <assignToReference>scOcPaxToUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sOcPax</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>MatchFound_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>PaxIdToOcPax</name>
        <label>PaxIdToOcPax</label>
        <locationX>623</locationX>
        <locationY>446</locationY>
        <assignmentItems>
            <assignToReference>sOcPax.PAX__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sPax.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>OcPaxToUpdate</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>PopulatePax</name>
        <label>PopulatePax</label>
        <locationX>368</locationX>
        <locationY>356</locationY>
        <assignmentItems>
            <assignToReference>sPax.Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sOcPax.Contact_PAX__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sPax.Job__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>vJobId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>sPax.OC_PAX_Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>sOcPax.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ScheduleToCreate</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_MatchFound</name>
        <label>Reset MatchFound</label>
        <locationX>156</locationX>
        <locationY>406</locationY>
        <assignmentItems>
            <assignToReference>vMatchFound</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ForeachPax</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Reset_MatchFound_0</name>
        <label>Reset MatchFound</label>
        <locationX>965</locationX>
        <locationY>454</locationY>
        <assignmentItems>
            <assignToReference>vMatchFound</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ForeachOcPaxReverse</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ScheduleToCreate</name>
        <label>ScheduleToCreate</label>
        <locationX>368</locationX>
        <locationY>268</locationY>
        <assignmentItems>
            <assignToReference>scPaxToCreate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sPax</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ForeachOcPax</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>ScheduleToDelete</name>
        <label>ScheduleToDelete</label>
        <locationX>1158</locationX>
        <locationY>539</locationY>
        <assignmentItems>
            <assignToReference>scPaxToDelete</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>sPax</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>ForeachPaxReverse</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>AnythingExists</name>
        <label>AnythingExists</label>
        <locationX>157</locationX>
        <locationY>97</locationY>
        <defaultConnectorLabel>NothingDoes</defaultConnectorLabel>
        <rules>
            <name>SomethingDoes</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>scOcPax</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>scPax</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ForeachOcPax</targetReference>
            </connector>
            <label>SomethingDoes</label>
        </rules>
    </decisions>
    <decisions>
        <name>CreatePaxCheck</name>
        <label>CreatePax</label>
        <locationX>611</locationX>
        <locationY>213</locationY>
        <defaultConnector>
            <targetReference>ForeachPaxReverse</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NoCreate</defaultConnectorLabel>
        <rules>
            <name>YesCreate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>scPaxToCreate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>CreatePax</targetReference>
            </connector>
            <label>YesCreate</label>
        </rules>
    </decisions>
    <decisions>
        <name>DeletePaxCheck</name>
        <label>DeletePax</label>
        <locationX>1192</locationX>
        <locationY>7</locationY>
        <defaultConnector>
            <targetReference>UpdateOcPax</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NoDelete</defaultConnectorLabel>
        <rules>
            <name>YesDelete</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>scPaxToDelete</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>DeletePax</targetReference>
            </connector>
            <label>YesDelete</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_MatchFound</name>
        <label>If MatchFound</label>
        <locationX>366</locationX>
        <locationY>488</locationY>
        <defaultConnector>
            <targetReference>PopulatePax</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No match found</defaultConnectorLabel>
        <rules>
            <name>Yes_MatchFound</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vMatchFound</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ForeachOcPax</targetReference>
            </connector>
            <label>Yes, MatchFound</label>
        </rules>
    </decisions>
    <decisions>
        <name>If_MatchFound_0</name>
        <label>If MatchFound</label>
        <locationX>1158</locationX>
        <locationY>668</locationY>
        <defaultConnector>
            <targetReference>ScheduleToDelete</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No match found</defaultConnectorLabel>
        <rules>
            <name>Yes_MatchFound_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>vMatchFound</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Yes, MatchFound</label>
        </rules>
    </decisions>
    <decisions>
        <name>MatchOcPaxToPax</name>
        <label>MatchOcPaxToPax</label>
        <locationX>618</locationX>
        <locationY>667</locationY>
        <defaultConnector>
            <targetReference>ForeachOcPaxReverse</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NoMatch</defaultConnectorLabel>
        <rules>
            <name>MatchesReverse</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOcPax.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>sPax.OC_PAX_Opportunity__c</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>OcPaxPaxIdSet</targetReference>
            </connector>
            <label>Matches</label>
        </rules>
    </decisions>
    <decisions>
        <name>MatchPaxToOcPax</name>
        <label>MatchPaxToOcPax</label>
        <locationX>151</locationX>
        <locationY>616</locationY>
        <defaultConnector>
            <targetReference>ForeachPax</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>NoMatch</defaultConnectorLabel>
        <rules>
            <name>Matches</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sPax.OC_PAX_Opportunity__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>sOcPax.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>MatchFound</targetReference>
            </connector>
            <label>Matches</label>
        </rules>
    </decisions>
    <decisions>
        <name>OcPaxPaxIdSet</name>
        <label>OcPaxPaxIdSet</label>
        <locationX>619</locationX>
        <locationY>567</locationY>
        <defaultConnector>
            <targetReference>MatchFound_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>AgghNoGood</defaultConnectorLabel>
        <rules>
            <name>PaxIdSet</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOcPax.PAX__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sOcPax.PAX__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>sPax.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>MatchFound_0</targetReference>
            </connector>
            <label>PaxIdSet</label>
        </rules>
        <rules>
            <name>NoPaxIdSet_PaxidNotNull</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sOcPax.PAX__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <elementReference>sPax.Id</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>sPax.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PaxIdToOcPax</targetReference>
            </connector>
            <label>NoPaxIdSet-PaxidNotNull</label>
        </rules>
    </decisions>
    <decisions>
        <name>UpdateOcPax</name>
        <label>UpdateOcPax</label>
        <locationX>1194</locationX>
        <locationY>133</locationY>
        <defaultConnectorLabel>NoUpdate</defaultConnectorLabel>
        <rules>
            <name>YesUpdate</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>scOcPaxToUpdate</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>UpdateOcPaxWithPaxId</targetReference>
            </connector>
            <label>YesUpdate</label>
        </rules>
    </decisions>
    <interviewLabel>PAX Mirroring {!$Flow.CurrentDateTime}</interviewLabel>
    <label>PAX Mirroring</label>
    <loops>
        <name>ForeachCreatedPax</name>
        <label>ForeachCreatedPax</label>
        <locationX>757</locationX>
        <locationY>76</locationY>
        <assignNextValueToReference>sPax</assignNextValueToReference>
        <collectionReference>scPaxToCreate</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>AddCreatedPax</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>ForeachPaxReverse</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>ForeachOcPax</name>
        <label>ForeachOcPax</label>
        <locationX>156</locationX>
        <locationY>215</locationY>
        <assignNextValueToReference>sOcPax</assignNextValueToReference>
        <collectionReference>scOcPax</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Reset_MatchFound</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>CreatePaxCheck</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>ForeachOcPaxReverse</name>
        <label>ForeachOcPax</label>
        <locationX>966</locationX>
        <locationY>667</locationY>
        <assignNextValueToReference>sOcPax</assignNextValueToReference>
        <collectionReference>scOcPax</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>MatchOcPaxToPax</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>If_MatchFound_0</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>ForeachPax</name>
        <label>ForeachPax</label>
        <locationX>154</locationX>
        <locationY>489</locationY>
        <assignNextValueToReference>sPax</assignNextValueToReference>
        <collectionReference>scPax</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>MatchPaxToOcPax</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>If_MatchFound</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>ForeachPaxReverse</name>
        <label>ForeachPax</label>
        <locationX>966</locationX>
        <locationY>214</locationY>
        <assignNextValueToReference>sPax</assignNextValueToReference>
        <collectionReference>scPax</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Reset_MatchFound_0</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>DeletePaxCheck</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>CreatePax</name>
        <label>CreatePax</label>
        <locationX>613</locationX>
        <locationY>74</locationY>
        <connector>
            <targetReference>ForeachCreatedPax</targetReference>
        </connector>
        <inputReference>scPaxToCreate</inputReference>
    </recordCreates>
    <recordDeletes>
        <name>DeletePax</name>
        <label>DeletePax</label>
        <locationX>1387</locationX>
        <locationY>8</locationY>
        <connector>
            <targetReference>UpdateOcPax</targetReference>
        </connector>
        <inputReference>scPaxToDelete</inputReference>
    </recordDeletes>
    <recordLookups>
        <name>FindOcPax</name>
        <label>FindOcPax</label>
        <locationX>19</locationX>
        <locationY>13</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>FindPax</targetReference>
        </connector>
        <filters>
            <field>Parent_Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vOpportunityId</elementReference>
            </value>
        </filters>
        <filters>
            <field>StageName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Closed Won</stringValue>
            </value>
        </filters>
        <object>Opportunity</object>
        <outputReference>scOcPax</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Contact_PAX__c</queriedFields>
        <queriedFields>PAX__c</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>FindPax</name>
        <label>FindPax</label>
        <locationX>20</locationX>
        <locationY>96</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>AnythingExists</targetReference>
        </connector>
        <filters>
            <field>Job__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>vJobId</elementReference>
            </value>
        </filters>
        <object>Participant__c</object>
        <outputReference>scPax</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>OC_PAX_Opportunity__c</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>UpdateOcPaxWithPaxId</name>
        <label>UpdateOcPaxWithPaxId</label>
        <locationX>1389</locationX>
        <locationY>137</locationY>
        <inputReference>scOcPaxToUpdate</inputReference>
    </recordUpdates>
    <startElementReference>FindOcPax</startElementReference>
    <status>Active</status>
    <variables>
        <name>scOcPax</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>scOcPaxToUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>scPax</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Participant__c</objectType>
    </variables>
    <variables>
        <name>scPaxToCreate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Participant__c</objectType>
    </variables>
    <variables>
        <name>scPaxToDelete</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Participant__c</objectType>
    </variables>
    <variables>
        <name>sOcPax</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>sPax</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Participant__c</objectType>
    </variables>
    <variables>
        <name>vJobId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>vMatchFound</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>vOpportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
</Flow>
